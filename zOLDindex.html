<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kee Hup - Practical Quotation System</title>
    <style>
      :root {
        --primary: #2c3e50;
        --success: #27ae60;
        --warning: #f39c12;
        --danger: #e74c3c;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 15px;
        color: #333;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }

      header {
        background: var(--primary);
        color: white;
        padding: 20px 30px;
        text-align: center;
      }

      .logo {
        max-height: 60px;
        margin-bottom: 10px;
      }

      h1 {
        font-size: 1.8rem;
        margin-bottom: 5px;
      }

      .subtitle {
        opacity: 0.8;
        font-size: 0.95rem;
      }

      /* æŠ˜å å¼ä»·æ ¼é¢æ¿ */
      .price-panel {
        background: #f8f9fa;
        margin: 20px;
        border-radius: 10px;
        overflow: hidden;
        border: 2px solid #e9ecef;
      }

      .price-header {
        background: #34495e;
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        font-weight: 600;
      }

      .price-header:hover {
        background: #2c3e50;
      }

      .toggle-icon {
        transition: transform 0.3s;
      }

      .price-header.active .toggle-icon {
        transform: rotate(180deg);
      }

      .price-content {
        padding: 20px;
        display: none;
      }

      .price-content.active {
        display: block;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ç®€æ´çš„ä»·æ ¼æ§åˆ¶ */
      .simple-price-control {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
      }

      .price-card {
        background: white;
        border-radius: 8px;
        padding: 15px;
        border: 2px solid #e3f2fd;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      }

      .material-name {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        font-weight: 600;
        color: var(--primary);
        font-size: 1.1rem;
      }

      .material-icon {
        font-size: 1.3rem;
      }

      .price-row {
        display: grid;
        grid-template-columns: 1fr 120px;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
      }

      .price-label {
        font-size: 0.9rem;
        color: #555;
      }

      .price-input-group {
        display: flex;
        align-items: center;
        border: 2px solid #ddd;
        border-radius: 6px;
        overflow: hidden;
        background: white;
      }

      .price-input {
        width: 100%;
        border: none;
        padding: 8px 10px;
        font-size: 0.95rem;
        text-align: right;
        font-weight: 600;
        color: var(--primary);
      }

      .currency {
        padding: 0 10px;
        background: #f1f8ff;
        font-size: 0.9rem;
        color: #3498db;
        font-weight: 600;
      }

      /* å®¢æˆ·ç±»å‹å¿«æ·åˆ‡æ¢ */
      .customer-quick-switch {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        background: white;
        padding: 10px;
        border-radius: 8px;
        border: 2px solid #e3f2fd;
      }

      .customer-tab {
        flex: 1;
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        background: #f8f9fa;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
        font-size: 0.9rem;
        text-align: center;
      }

      .customer-tab:hover {
        background: #e9ecef;
      }

      .customer-tab.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: 600;
      }

      /* ä¸»è®¡ç®—å™¨åŒºåŸŸ */
      .calculator-main {
        padding: 0 20px 20px;
      }

      .section-title {
        color: var(--primary);
        margin: 20px 0 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #eee;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .input-group {
        margin-bottom: 15px;
      }

      .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #555;
        font-size: 0.95rem;
      }

      .dimension-inputs {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 10px;
        align-items: center;
      }

      .dimension-inputs span {
        text-align: center;
        font-weight: bold;
        color: #6c757d;
      }

      input,
      select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #dee2e6;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s;
      }

      input:focus,
      select:focus {
        border-color: #667eea;
        outline: none;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      /* è‡ªå®šä¹‰ææ–™åŒºåŸŸ */
      .custom-material-section {
        background: #f1f8ff;
        border: 2px dashed #3498db;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        display: none;
      }

      .custom-material-section.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }

      .custom-input-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 10px;
      }

      .custom-note {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 0.9rem;
        color: #856404;
        margin-top: 10px;
      }

      .sqft-display {
        text-align: center;
        padding: 10px;
        background: #e3f2fd;
        border-radius: 6px;
        margin-top: 10px;
        font-weight: 500;
        color: #1976d2;
      }

      .add-btn {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        width: 100%;
        margin: 10px 0 25px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .add-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(46, 204, 113, 0.4);
      }

      /* é¡¹ç›®åˆ—è¡¨ */
      .items-container {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        border: 2px solid #e9ecef;
        margin-bottom: 20px;
      }

      .items-header {
        display: grid;
        grid-template-columns: 3fr 1fr 1fr 1fr 1fr 50px;
        gap: 15px;
        padding: 15px;
        background: var(--primary);
        color: white;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .item-row {
        display: grid;
        grid-template-columns: 3fr 1fr 1fr 1fr 1fr 50px;
        gap: 15px;
        padding: 12px 15px;
        align-items: center;
        border-bottom: 1px solid #eee;
        transition: background 0.2s;
      }

      .item-row:nth-child(even) {
        background: #f8f9fa;
      }

      .item-row:hover {
        background: #e3f2fd;
      }

      .delete-btn {
        background: var(--danger);
        color: white;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        transition: all 0.3s;
      }

      .delete-btn:hover {
        background: #c0392b;
        transform: scale(1.1);
      }

      /* æ€»è®¡åŒºåŸŸ */
      .total-section {
        background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin: 20px;
      }

      .total-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .grand-total {
        font-size: 2rem;
        font-weight: bold;
        color: #2ecc71;
        border-top: 2px solid rgba(255, 255, 255, 0.2);
        padding-top: 20px;
        margin-top: 20px;
      }

      /* å¤‡æ³¨åŒºåŸŸ */
      .notes-section {
        background: white;
        padding: 15px 20px;
        margin: 20px;
        border-radius: 10px;
        border: 2px solid #e3f2fd;
      }

      textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #dee2e6;
        border-radius: 8px;
        font-size: 0.95rem;
        font-family: inherit;
        resize: vertical;
        min-height: 80px;
      }

      /* æŒ‰é’®ç»„ */
      .action-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px;
      }

      .action-btn {
        padding: 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .print-btn {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
      }

      .print-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(52, 152, 219, 0.4);
      }

      .reset-btn {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
      }

      .reset-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(231, 76, 60, 0.4);
      }

      .save-btn {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        color: white;
      }

      .save-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(243, 156, 18, 0.4);
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {

        .items-header,
        .item-row {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .items-header {
          display: none;
        }

        .input-grid {
          grid-template-columns: 1fr;
        }

        .simple-price-control {
          grid-template-columns: 1fr;
        }

        .action-buttons {
          grid-template-columns: 1fr;
        }

        .customer-quick-switch {
          flex-direction: column;
        }

        .custom-input-row {
          grid-template-columns: 1fr;
        }
      }

      /* æœ€å°ä»·æ ¼æç¤º */
      .min-price-hint {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 8px 12px;
        border-radius: 6px;
        margin-top: 10px;
        font-size: 0.85rem;
        color: #856404;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* ========== æ–°æ·»åŠ çš„æ ·å¼ ========== */
      /* è¿‘ä¼¼å€¼è®¡ç®—å¼€å…³ */
      .rounding-toggle {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 10px;
        padding: 10px;
        background: #e8f5e9;
        border-radius: 6px;
        border: 1px solid #4caf50;
      }

      .rounding-toggle label {
        font-size: 0.9rem;
        font-weight: 500;
        color: #2e7d32;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 24px;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
      }

      input:checked+.slider {
        background-color: #4caf50;
      }

      input:checked+.slider:before {
        transform: translateX(26px);
      }

      /* 3D LEDä¸“ç”¨è®¡ç®—å™¨ */
      .led-calculator {
        background: #f3e5f5;
        border: 2px solid #9c27b0;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        display: none;
      }

      .led-calculator.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      .led-input-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        margin-bottom: 10px;
      }

      .led-result {
        background: #fff;
        padding: 12px;
        border-radius: 6px;
        border: 1px solid #e1bee7;
        margin-top: 10px;
        font-weight: 500;
      }

      .led-result span {
        color: #9c27b0;
        font-weight: bold;
      }

      .calculator-info {
        background: #fff8e1;
        border: 1px solid #ffd54f;
        border-radius: 6px;
        padding: 10px;
        margin-top: 10px;
        font-size: 0.85rem;
        color: #5d4037;
      }

      .calculator-info ul {
        margin: 5px 0 5px 20px;
        padding: 0;
      }

      .calculator-info li {
        margin-bottom: 3px;
      }

      /* è¿‘ä¼¼å€¼æŒ‡ç¤ºå™¨ */
      .rounded-badge {
        background: #4caf50;
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.8rem;
        font-weight: 500;
        margin-left: 8px;
      }

      .original-price {
        text-decoration: line-through;
        color: #999;
        margin-right: 5px;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <img src="https://raw.githubusercontent.com/pacguy-mtk/calculator/refs/heads/main/znp_25521_1708679868.png" alt="Kee Hup Logo" class="logo">
        <h1>Kee Hup Quotation System</h1>
        <p class="subtitle">Practical & Flexible Pricing Calculator</p>
      </header>
      <!-- æŠ˜å å¼ä»·æ ¼é¢æ¿ -->
      <div class="price-panel">
        <div class="price-header active" id="priceToggle">
          <div>ğŸ’° Price Settings (Click to Show/Hide)</div>
          <div class="toggle-icon">â–¼</div>
        </div>
        <div class="price-content active" id="priceContent">
          <!-- å®¢æˆ·ç±»å‹å¿«æ·åˆ‡æ¢ -->
          <div class="customer-quick-switch" id="customerTabs">
            <button class="customer-tab active" data-type="standard">Standard Price</button>
            <button class="customer-tab" data-type="regular">Regular Customer</button>
            <button class="customer-tab" data-type="vip">VIP Customer</button>
          </div>
          <!-- ä»·æ ¼æ§åˆ¶ -->
          <div class="simple-price-control">
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">ğŸ–¨ï¸</span> Tarpaulin Solvent
              </div>
              <div class="price-row">
                <div class="price-label">Price per sqft:</div>
                <div class="price-input-group">
                  <input type="number" id="priceSolvent" class="price-input" step="0.10" value="2.00" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <div class="min-price-hint"> âš ï¸ Minimum RM 30 per item </div>
            </div>
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">âœ¨</span> Tarpaulin UV
              </div>
              <div class="price-row">
                <div class="price-label">Price per sqft:</div>
                <div class="price-input-group">
                  <input type="number" id="priceUV" class="price-input" step="0.10" value="4.00" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <div class="min-price-hint"> âš ï¸ Minimum RM 30 per item </div>
            </div>
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">ğŸ’¡</span> 3D LED Letter
              </div>
              <div class="price-row">
                <div class="price-label">Price per cm:</div>
                <div class="price-input-group">
                  <input type="number" id="priceLed3d" class="price-input" step="0.10" value="6.00" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <!-- è¿‘ä¼¼å€¼è®¡ç®—å¼€å…³ -->
              <div class="rounding-toggle">
                <label>Use Approximate Pricing:</label>
                <div class="switch">
                  <input type="checkbox" id="roundingLed3d" checked>
                  <span class="slider"></span>
                </div>
              </div>
              <div class="min-price-hint"> âš ï¸ Round to nearest RM (e.g., 67.50 â†’ 68.00) </div>
            </div>
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">ğŸŒˆ</span> 3D LED Letter with UV Sticker
              </div>
              <div class="price-row">
                <div class="price-label">Price per cm:</div>
                <div class="price-input-group">
                  <input type="number" id="priceLed3dUv" class="price-input" step="0.10" value="7.00" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <div class="rounding-toggle">
                <label>Use Approximate Pricing:</label>
                <div class="switch">
                  <input type="checkbox" id="roundingLed3dUv" checked>
                  <span class="slider"></span>
                </div>
              </div>
              <div class="min-price-hint"> âš ï¸ Round to nearest RM (e.g., 87.50 â†’ 88.00) </div>
            </div>
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">ğŸ’°</span> 3D LED Letter Special Price
              </div>
              <div class="price-row">
                <div class="price-label">Price per cm:</div>
                <div class="price-input-group">
                  <input type="number" id="priceLed3dSpecial" class="price-input" step="0.10" value="4.50" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <div class="rounding-toggle">
                <label>Use Approximate Pricing:</label>
                <div class="switch">
                  <input type="checkbox" id="roundingLed3dSpecial" checked>
                  <span class="slider"></span>
                </div>
              </div>
              <div class="min-price-hint"> âš ï¸ Special discounted rate </div>
            </div>
            <div class="price-card">
              <div class="material-name">
                <span class="material-icon">ğŸ¨</span> Design Fees
              </div>
              <div class="price-row">
                <div class="price-label">Minimum charge:</div>
                <div class="price-input-group">
                  <input type="number" id="priceDesign" class="price-input" step="5" value="80.00" min="0">
                  <span class="currency">RM</span>
                </div>
              </div>
              <div class="min-price-hint"> âœ… Can be RM 0 (customer's design) </div>
            </div>
          </div>
          <div style="margin-top: 15px; font-size: 0.9rem; color: #666; padding: 10px; background: #f1f8ff; border-radius: 6px;"> ğŸ’¡ <strong>Tip:</strong> Switch between customer types above to quickly apply different pricing strategies. </div>
        </div>
      </div>
      <!-- ä¸»è®¡ç®—å™¨ -->
      <div class="calculator-main">
        <div class="section-title">
          <span>â•</span> Add Items to Quotation
        </div>
        <div class="input-grid">
          <div class="input-group">
            <label for="itemName">Description</label>
            <input type="text" id="itemName" placeholder="e.g., Front Banner, Event Signage">
          </div>
          <div class="input-group">
            <label for="size">Size (Width Ã— Height)</label>
            <div class="dimension-inputs">
              <input type="number" id="width" placeholder="Width" min="0.1" value="1" step="0.1">
              <span>Ã—</span>
              <input type="number" id="height" placeholder="Height" min="0.1" value="1" step="0.1">
            </div>
            <div class="sqft-display" id="sqftDisplay"> Total Area: <span id="totalSqft">1.00</span> sqft </div>
          </div>
          <div class="input-group">
            <label for="materialType">Material Type</label>
            <select id="materialType">
              <option value="tarpaulin-solvent">Tarpaulin Solvent</option>
              <option value="tarpaulin-uv">Tarpaulin UV</option>
              <option value="led-3d">3D LED Letter</option>
              <option value="led-3d-uv">3D LED Letter with UV Sticker</option>
              <option value="led-3d-special">3D LED Letter Special Price</option>
              <option value="design-fees">Design Fees</option>
              <option value="custom">â• Custom Material</option>
            </select>
          </div>
        </div>
        <!-- 3D LEDä¸“ç”¨è®¡ç®—å™¨ -->
        <div class="led-calculator" id="ledCalculator">
          <div class="led-input-row">
            <div class="input-group">
              <label for="ledHeight">Letter Height (cm)</label>
              <input type="number" id="ledHeight" placeholder="e.g., 15" min="1" value="15" step="0.5">
            </div>
            <div class="input-group">
              <label for="ledQuantity">Quantity (units)</label>
              <input type="number" id="ledQuantity" placeholder="e.g., 22" min="1" value="1" step="1">
            </div>
          </div>
          <div class="led-result" id="ledPreview">
            <strong>Calculation:</strong>
            <br>
            <span id="calculationDetail">15 cm Ã— RM 4.50 = RM 67.50</span>
            <br>
            <span id="roundedDetail">Rounded to: RM 68.00</span>
            <br>
            <span id="finalDetail">Ã— 22 units = <strong>RM 1,496.00</strong>
            </span>
          </div>
          <div class="calculator-info">
            <strong>ğŸ“ How 3D LED pricing works:</strong>
            <ul>
              <li>Price = Letter Height (cm) Ã— Price per cm</li>
              <li>Result rounded to nearest RM (e.g., 67.50 â†’ 68.00)</li>
              <li>Then multiplied by quantity</li>
            </ul>
            <div style="margin-top: 5px;">
              <strong>Example:</strong> 15cm Ã— RM4.50 = RM67.50 â†’ RM68 Ã— 22 units = RM1,496
            </div>
          </div>
        </div>
        <!-- è‡ªå®šä¹‰ææ–™åŒºåŸŸ -->
        <div class="custom-material-section" id="customMaterialSection">
          <div class="custom-input-row">
            <div class="input-group">
              <label for="customMaterialName">Material Name</label>
              <input type="text" id="customMaterialName" placeholder="e.g., Sticker Vinyl, Banner Stand">
            </div>
            <div class="input-group">
              <label for="customUnitPrice">Price per cm</label>
              <input type="number" id="customUnitPrice" step="0.10" value="0.20" min="0">
            </div>
          </div>
          <div class="custom-note"> ğŸ“ Custom materials are calculated in <strong>centimeters</strong>. Size inputs above are treated as cm Ã— unit. </div>
        </div>
        <button class="add-btn" id="addItemBtn">
          <span style="font-size: 1.5rem;">+</span> Add Item to Quotation </button>
        <!-- é¡¹ç›®åˆ—è¡¨ -->
        <div class="items-container">
          <div class="items-header">
            <div>Description</div>
            <div>Size</div>
            <div>Quantity</div>
            <div>Unit Price</div>
            <div>Subtotal</div>
            <div></div>
          </div>
          <div id="itemsList"></div>
        </div>
        <!-- å¤‡æ³¨åŒºåŸŸ -->
        <div class="notes-section">
          <label for="printingNotes">ğŸ“ Notes (Optional)</label>
          <textarea id="printingNotes" placeholder="e.g., Customer provides own design
e.g., Walk-in customer, will collect tomorrow
e.g., Special discount applied"></textarea>
        </div>
        <!-- æ€»è®¡åŒºåŸŸ -->
        <div class="total-section">
          <div class="total-row">
            <span>Total Items:</span>
            <span id="totalItems">0</span>
          </div>
          <div class="total-row">
            <span>Subtotal:</span>
            <span id="subtotal">RM 0.00</span>
          </div>
          <div class="total-row grand-total">
            <span>GRAND TOTAL:</span>
            <span id="grandTotal">RM 0.00</span>
          </div>
          <div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;"> Current pricing: <strong id="currentPricing">Standard</strong>
          </div>
        </div>
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="action-buttons">
          <button class="action-btn print-btn" id="printBtn"> ğŸ–¨ï¸ Print Quote </button>
          <button class="action-btn save-btn" id="saveBtn"> ğŸ’¾ Save Settings </button>
          <button class="action-btn reset-btn" id="resetBtn"> ğŸ”„ New Quote </button>
        </div>
      </div>
    </div>
    <script>
      // ==================== ç®€æ´çš„ä»·æ ¼ç®¡ç†ç³»ç»Ÿ ====================
      // é»˜è®¤ä»·æ ¼é…ç½®ï¼ˆä¸‰ç§å®¢æˆ·ç±»å‹ï¼‰
      const defaultPrices = {
        'standard': { // æ ‡å‡†ä»·æ ¼
          'tarpaulin-solvent': 2.00,
          'tarpaulin-uv': 4.00,
          'led-3d': 6.00,
          'led-3d-uv': 7.00,
          'led-3d-special': 4.50,
          'design-fees': 80.00
        },
        'regular': { // å¸¸å®¢ä»·æ ¼
          'tarpaulin-solvent': 1.80,
          'tarpaulin-uv': 3.50,
          'led-3d': 5.50,
          'led-3d-uv': 6.50,
          'led-3d-special': 4.00,
          'design-fees': 70.00
        },
        'vip': { // VIPä»·æ ¼
          'tarpaulin-solvent': 1.70,
          'tarpaulin-uv': 3.50,
          'led-3d': 5.00,
          'led-3d-uv': 6.00,
          'led-3d-special': 3.80,
          'design-fees': 65.00
        }
      };
      // å½“å‰ä»·æ ¼é…ç½®ï¼ˆä»localStorageåŠ è½½æˆ–ä½¿ç”¨é»˜è®¤å€¼ï¼‰
      let priceConfig = JSON.parse(localStorage.getItem('keehup_prices')) || {
        ...defaultPrices
      };
      // è¿‘ä¼¼å€¼é…ç½®
      const defaultRoundingConfig = {
        'led-3d': true,
        'led-3d-uv': true,
        'led-3d-special': true
      };
      // åŠ è½½ä¿å­˜çš„è¿‘ä¼¼å€¼è®¾ç½®
      const savedRounding = JSON.parse(localStorage.getItem('keehup_rounding'));
      let roundingConfig = savedRounding ? {
        ...defaultRoundingConfig,
        ...savedRounding
      } : {
        ...defaultRoundingConfig
      };
      let currentCustomerType = 'standard';
      let items = [];
      // æœ€ä½ä»·æ ¼é™åˆ¶
      const MIN_TARPAULIN_CHARGE = 30.00;
      const MIN_CUSTOM_CHARGE = 20.00; // è‡ªå®šä¹‰ææ–™æœ€ä½æ”¶è´¹
      // DOMå…ƒç´ 
      const priceToggle = document.getElementById('priceToggle');
      const priceContent = document.getElementById('priceContent');
      const customerTabs = document.getElementById('customerTabs');
      const priceSolventInput = document.getElementById('priceSolvent');
      const priceUVInput = document.getElementById('priceUV');
      const priceDesignInput = document.getElementById('priceDesign');
      const priceLed3dInput = document.getElementById('priceLed3d');
      const priceLed3dUvInput = document.getElementById('priceLed3dUv');
      const priceLed3dSpecialInput = document.getElementById('priceLed3dSpecial');
      const currentPricingSpan = document.getElementById('currentPricing');
      const materialTypeSelect = document.getElementById('materialType');
      const customMaterialSection = document.getElementById('customMaterialSection');
      const ledCalculator = document.getElementById('ledCalculator');
      // ==================== 3D LEDè®¡ç®—å‡½æ•° ====================
      function calculate3DLedPrice(materialType) {
        const height = parseFloat(document.getElementById('ledHeight').value) || 0;
        const quantity = parseInt(document.getElementById('ledQuantity').value) || 0;
        if (height <= 0 || quantity <= 0) return 0;
        const pricePerCm = getCurrentPrice(materialType);
        const exactPrice = height * pricePerCm;
        const useRounding = roundingConfig[materialType];
        // åº”ç”¨è¿‘ä¼¼å€¼è®¡ç®—
        let roundedPrice;
        if (useRounding) {
          // å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°
          roundedPrice = Math.round(exactPrice);
        } else {
          // ä¿ç•™ä¸¤ä½å°æ•°
          roundedPrice = Math.round(exactPrice * 100) / 100;
        }
        const total = roundedPrice * quantity;
        // æ›´æ–°é¢„è§ˆ
        const materialNames = {
          'led-3d': '3D LED Letter',
          'led-3d-uv': '3D LED Letter with UV Sticker',
          'led-3d-special': '3D LED Letter Special Price'
        };
        const previewHTML = `
                
																									<strong>Calculation for ${materialNames[materialType]}:</strong>
																									<br>
																										<span id="calculationDetail">${height.toFixed(1)} cm Ã— RM ${pricePerCm.toFixed(2)} = RM ${exactPrice.toFixed(2)}</span>
																										<br>
                ${useRounding ? 
                    `
																											<span id="roundedDetail">Rounded to: 
																												<strong>RM ${roundedPrice.toFixed(2)}</strong>
																											</span>
																											<br>` : 
                    `
																												<span id="roundedDetail">Exact price: RM ${roundedPrice.toFixed(2)}</span>
																												<br>`}
                
																													<span id="finalDetail">Ã— ${quantity} units = 
																														<strong>RM ${total.toFixed(2)}</strong>
																													</span>
            `;
        document.getElementById('ledPreview').innerHTML = previewHTML;
        return {
          exactPrice,
          roundedPrice,
          total,
          height,
          quantity
        };
      }
      // ==================== åˆå§‹åŒ–ä»·æ ¼ç³»ç»Ÿ ====================
      function initPriceSystem() {
        // åŠ è½½ä¿å­˜çš„ä»·æ ¼é…ç½®
        loadPriceConfig();
        // æŠ˜å é¢æ¿åˆ‡æ¢
        priceToggle.addEventListener('click', function() {
          priceContent.classList.toggle('active');
          this.classList.toggle('active');
        });
        // å®¢æˆ·ç±»å‹åˆ‡æ¢
        customerTabs.querySelectorAll('.customer-tab').forEach(tab => {
          tab.addEventListener('click', function() {
            currentCustomerType = this.dataset.type;
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            customerTabs.querySelectorAll('.customer-tab').forEach(t => {
              t.classList.remove('active');
            });
            this.classList.add('active');
            // åŠ è½½è¯¥å®¢æˆ·ç±»å‹çš„ä»·æ ¼
            loadPricesForCustomer(currentCustomerType);
            updateCurrentPricingDisplay();
          });
        });
        // ä»·æ ¼è¾“å…¥å˜åŒ–æ—¶ä¿å­˜
        [priceSolventInput, priceUVInput, priceDesignInput, priceLed3dInput, priceLed3dUvInput, priceLed3dSpecialInput].forEach(input => {
          input.addEventListener('input', function() {
            saveCurrentPrices();
          });
        });
        // è®¾è®¡è´¹ç”¨å¯ä»¥è®¾ä¸º0
        priceDesignInput.min = 0;
        // ææ–™ç±»å‹åˆ‡æ¢
        materialTypeSelect.addEventListener('change', function() {
          updateMaterialType();
        });
        // åˆå§‹åŒ–æ˜¾ç¤º
        loadPricesForCustomer(currentCustomerType);
        updateCurrentPricingDisplay();
        updateMaterialType();
      }
      // æ›´æ–°ææ–™ç±»å‹æ˜¾ç¤º
      function updateMaterialType() {
        const selectedType = materialTypeSelect.value;
        // æ˜¾ç¤º/éšè—3D LEDè®¡ç®—å™¨
        if (selectedType === 'led-3d' || selectedType === 'led-3d-uv' || selectedType === 'led-3d-special') {
          ledCalculator.classList.add('active');
          customMaterialSection.classList.remove('active');
          update3DLedCalculator();
        } else if (selectedType === 'custom') {
          // æ˜¾ç¤ºè‡ªå®šä¹‰ææ–™åŒºåŸŸ
          ledCalculator.classList.remove('active');
          customMaterialSection.classList.add('active');
          // æ›´æ–°å°ºå¯¸æç¤º
          document.getElementById('sqftDisplay').innerHTML = 'Size in  < strong > centimeters < /strong> (cm Ã— unit)';
          // æ›´æ–°å ä½ç¬¦
          document.getElementById('width').placeholder = 'Width (cm)';
          document.getElementById('height').placeholder = 'Height (unit)';
        } else {
          // éšè—æ‰€æœ‰ç‰¹æ®Šè®¡ç®—å™¨
          ledCalculator.classList.remove('active');
          customMaterialSection.classList.remove('active');
          // æ¢å¤å¹³æ–¹è‹±å°ºæ˜¾ç¤º
          const width = parseFloat(document.getElementById('width').value) || 0;
          const height = parseFloat(document.getElementById('height').value) || 0;
          const totalSqft = (width * height).toFixed(2);
          document.getElementById('sqftDisplay').innerHTML = `Total Area: 
																													<span id="totalSqft">${totalSqft}</span> sqft`;
          // æ¢å¤å ä½ç¬¦
          document.getElementById('width').placeholder = 'Width';
          document.getElementById('height').placeholder = 'Height';
          // å¦‚æœæ˜¯è®¾è®¡è´¹ï¼Œç¦ç”¨é«˜åº¦è¾“å…¥
          if (selectedType === 'design-fees') {
            document.getElementById('height').disabled = true;
            document.getElementById('height').value = 1;
            document.getElementById('sqftDisplay').innerHTML = 'Minimum charge applies';
          } else {
            document.getElementById('height').disabled = false;
          }
        }
      }
      // æ›´æ–°3D LEDè®¡ç®—å™¨
      function update3DLedCalculator() {
        const selectedType = materialTypeSelect.value;
        if (selectedType === 'led-3d' || selectedType === 'led-3d-uv' || selectedType === 'led-3d-special') {
          calculate3DLedPrice(selectedType);
        }
      }
      // åŠ è½½ä»·æ ¼é…ç½®
      function loadPriceConfig() {
        // ç¡®ä¿æ¯ç§å®¢æˆ·ç±»å‹éƒ½æœ‰å®Œæ•´çš„é…ç½®
        ['standard', 'regular', 'vip'].forEach(type => {
          if (!priceConfig[type]) {
            priceConfig[type] = {
              ...defaultPrices[type]
            };
          }
        });
      }
      // åŠ è½½æŒ‡å®šå®¢æˆ·ç±»å‹çš„ä»·æ ¼åˆ°è¾“å…¥æ¡†
      function loadPricesForCustomer(customerType) {
        const prices = priceConfig[customerType];
        priceSolventInput.value = prices['tarpaulin-solvent'].toFixed(2);
        priceUVInput.value = prices['tarpaulin-uv'].toFixed(2);
        priceLed3dInput.value = prices['led-3d'].toFixed(2);
        priceLed3dUvInput.value = prices['led-3d-uv'].toFixed(2);
        priceLed3dSpecialInput.value = prices['led-3d-special'].toFixed(2);
        priceDesignInput.value = prices['design-fees'].toFixed(2);
      }
      // ä¿å­˜å½“å‰ä»·æ ¼åˆ°é…ç½®
      function saveCurrentPrices() {
        priceConfig[currentCustomerType] = {
          'tarpaulin-solvent': parseFloat(priceSolventInput.value) || 0,
          'tarpaulin-uv': parseFloat(priceUVInput.value) || 0,
          'led-3d': parseFloat(priceLed3dInput.value) || 0,
          'led-3d-uv': parseFloat(priceLed3dUvInput.value) || 0,
          'led-3d-special': parseFloat(priceLed3dSpecialInput.value) || 0,
          'design-fees': parseFloat(priceDesignInput.value) || 0
        };
        localStorage.setItem('keehup_prices', JSON.stringify(priceConfig));
        console.log(`Prices saved for ${currentCustomerType} customer`);
      }
      // æ›´æ–°å½“å‰å®šä»·æ˜¾ç¤º
      function updateCurrentPricingDisplay() {
        const displayNames = {
          'standard': 'Standard Pricing',
          'regular': 'Regular Customer Pricing',
          'vip': 'VIP Customer Pricing'
        };
        currentPricingSpan.textContent = displayNames[currentCustomerType];
      }
      // ä¿å­˜è®¾ç½®åˆ°æœ¬åœ°
      function saveSettings() {
        saveCurrentPrices();
        saveRoundingConfig();
        alert('Price settings saved successfully!');
      }
      // ==================== è¿‘ä¼¼å€¼è®¾ç½® ====================
      function loadRoundingSettings() {
        document.getElementById('roundingLed3d').checked = roundingConfig['led-3d'];
        document.getElementById('roundingLed3dUv').checked = roundingConfig['led-3d-uv'];
        document.getElementById('roundingLed3dSpecial').checked = roundingConfig['led-3d-special'];
      }

      function saveRoundingConfig() {
        localStorage.setItem('keehup_rounding', JSON.stringify(roundingConfig));
      }
      // ==================== é¡¹ç›®ç®¡ç†ç³»ç»Ÿ ====================
      // è·å–ææ–™æ˜¾ç¤ºåç§°
      function getMaterialDisplayName(materialType) {
        const names = {
          'tarpaulin-solvent': 'Tarpaulin Solvent',
          'tarpaulin-uv': 'Tarpaulin UV',
          'led-3d': '3D LED Letter',
          'led-3d-uv': '3D LED Letter with UV Sticker',
          'led-3d-special': '3D LED Letter Special Price',
          'design-fees': 'Design Fees',
          'custom': 'Custom Material'
        };
        return names[materialType] || materialType;
      }
      // è·å–å½“å‰ä»·æ ¼
      function getCurrentPrice(materialType) {
        const prices = priceConfig[currentCustomerType];
        return prices[materialType] || 0;
      }
      // è®¡ç®—é¢ç§¯
      function calculateArea() {
        const width = parseFloat(document.getElementById('width').value) || 0;
        const height = parseFloat(document.getElementById('height').value) || 0;
        const materialType = document.getElementById('materialType').value;
        if (materialType === 'custom') {
          // è‡ªå®šä¹‰ææ–™æŒ‰å˜ç±³è®¡ç®—
          const areaCm = (width * height).toFixed(2);
          return parseFloat(areaCm);
        } else if (materialType === 'led-3d' || materialType === 'led-3d-uv' || materialType === 'led-3d-special') {
          // 3D LEDææ–™ä½¿ç”¨ä¸“ç”¨è®¡ç®—å™¨
          return 0;
        } else {
          // æ™®é€šææ–™æŒ‰å¹³æ–¹è‹±å°ºè®¡ç®—
          const totalSqft = (width * height).toFixed(2);
          document.getElementById('totalSqft').textContent = totalSqft;
          return parseFloat(totalSqft);
        }
      }
      // æ·»åŠ é¡¹ç›®
      function addItem() {
        const name = document.getElementById('itemName').value.trim();
        const width = parseFloat(document.getElementById('width').value) || 0;
        const height = parseFloat(document.getElementById('height').value) || 0;
        const materialType = document.getElementById('materialType').value;
        if (!name) {
          alert('Please enter item description');
          return;
        }
        // è·å–å½“å‰ä»·æ ¼å’Œææ–™åç§°
        let unitPrice, materialName, unit, quantity, sizeDisplay, subtotal;
        // å¦‚æœæ˜¯3D LEDææ–™ï¼Œä½¿ç”¨ä¸“ç”¨è®¡ç®—å™¨
        if (materialType === 'led-3d' || materialType === 'led-3d-uv' || materialType === 'led-3d-special') {
          const ledHeight = parseFloat(document.getElementById('ledHeight').value) || 0;
          const ledQuantity = parseInt(document.getElementById('ledQuantity').value) || 0;
          if (ledHeight <= 0) {
            alert('Please enter letter height');
            return;
          }
          if (ledQuantity <= 0) {
            alert('Please enter quantity');
            return;
          }
          const calculation = calculate3DLedPrice(materialType);
          unitPrice = getCurrentPrice(materialType);
          materialName = getMaterialDisplayName(materialType);
          unit = 'units';
          quantity = ledQuantity;
          sizeDisplay = `${ledHeight.toFixed(1)} cm height Ã— ${ledQuantity} units`;
          subtotal = calculation.total;
        } else if (materialType === 'custom') {
          materialName = document.getElementById('customMaterialName').value.trim() || 'Custom Material';
          unitPrice = parseFloat(document.getElementById('customUnitPrice').value) || 0;
          unit = 'cm/line';
          quantity = width * height; // å¹³æ–¹å˜ç±³
          sizeDisplay = `${width.toFixed(1)} Ã— ${height.toFixed(1)} cm/line`;
          subtotal = quantity * unitPrice;
          // åº”ç”¨æœ€ä½æ”¶è´¹
          if (subtotal < MIN_CUSTOM_CHARGE) {
            subtotal = MIN_CUSTOM_CHARGE;
          }
        } else if (materialType === 'design-fees') {
          materialName = 'Design Fees';
          unitPrice = getCurrentPrice(materialType);
          unit = 'minimum';
          quantity = 1; // è®¾è®¡è´¹æŒ‰æœ€ä½æ”¶è´¹è®¡ç®—
          sizeDisplay = 'Design Service';
          subtotal = unitPrice;
        } else {
          materialName = getMaterialDisplayName(materialType);
          unitPrice = getCurrentPrice(materialType);
          unit = 'sqft';
          quantity = width * height;
          sizeDisplay = `${width.toFixed(1)} Ã— ${height.toFixed(1)} ft`;
          subtotal = quantity * unitPrice;
          // åº”ç”¨æœ€ä½æ”¶è´¹
          if (subtotal < MIN_TARPAULIN_CHARGE) {
            subtotal = MIN_TARPAULIN_CHARGE;
          }
        }
        // åˆ›å»ºé¡¹ç›®å¯¹è±¡
        const item = {
          id: Date.now(),
          name,
          materialName,
          materialType,
          sizeDisplay,
          quantity: parseFloat(quantity.toFixed(2)),
          unit,
          unitPrice: parseFloat(unitPrice.toFixed(2)),
          subtotal: parseFloat(subtotal.toFixed(2)),
          customerType: currentCustomerType
        };
        // å¦‚æœæ˜¯3D LEDææ–™ï¼Œæ·»åŠ é¢å¤–ä¿¡æ¯
        if (materialType === 'led-3d' || materialType === 'led-3d-uv' || materialType === 'led-3d-special') {
          const ledHeight = parseFloat(document.getElementById('ledHeight').value) || 0;
          const calculation = calculate3DLedPrice(materialType);
          item.height = ledHeight;
          item.roundedPrice = calculation.roundedPrice;
          item.isRounded = roundingConfig[materialType];
        }
        // æ·»åŠ åˆ°åˆ—è¡¨
        items.push(item);
        // æ›´æ–°æ˜¾ç¤º
        renderItems();
        updateTotals();
        // é‡ç½®è¡¨å•
        resetForm();
        console.log(`Added: ${name} - RM ${subtotal.toFixed(2)}`);
      }
      // é‡ç½®è¡¨å•
      function resetForm() {
        document.getElementById('itemName').value = '';
        document.getElementById('width').value = 1;
        document.getElementById('height').value = 1;
        document.getElementById('ledHeight').value = 15;
        document.getElementById('ledQuantity').value = 1;
        if (materialTypeSelect.value === 'custom') {
          document.getElementById('customMaterialName').value = '';
          document.getElementById('customUnitPrice').value = '0.20';
        }
        // é‡æ–°è®¡ç®—é¢ç§¯
        calculateArea();
      }
      // æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
      function renderItems() {
        const itemsList = document.getElementById('itemsList');
        itemsList.innerHTML = '';
        if (items.length === 0) {
          const emptyRow = document.createElement('div');
          emptyRow.className = 'item-row';
          emptyRow.style.textAlign = 'center';
          emptyRow.style.padding = '30px';
          emptyRow.style.color = '#999';
          emptyRow.textContent = 'No items added yet. Add items to create a quotation.';
          itemsList.appendChild(emptyRow);
          return;
        }
        items.forEach(item => {
          const row = document.createElement('div');
          row.className = 'item-row';
          // å¦‚æœæ˜¯3D LEDææ–™ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
          if (item.materialType === 'led-3d' || item.materialType === 'led-3d-uv' || item.materialType === 'led-3d-special') {
            const originalPrice = item.height * item.unitPrice;
            const roundedBadge = item.isRounded ? `
																													<span class="rounded-badge">Rounded</span>` : '';
            row.innerHTML = `
                        
																													<div>
																														<strong>${item.name}</strong>
																														<div style="font-size: 0.9rem; color: #666;">
                                ${item.materialName} ${roundedBadge}
                            </div>
																													</div>
																													<div>${item.sizeDisplay}</div>
																													<div>${item.quantity} ${item.unit}</div>
																													<div>
																														<div>${item.height.toFixed(1)} cm Ã— RM ${item.unitPrice.toFixed(2)}</div>
																														<div style="font-size: 0.8rem; color: #666;">
																															<span class="original-price">RM ${originalPrice.toFixed(2)}</span>
                                â†’ RM ${item.roundedPrice.toFixed(2)}
                            
																														</div>
																													</div>
																													<div>
																														<strong>RM ${item.subtotal.toFixed(2)}</strong>
																													</div>
																													<div>
																														<button class="delete-btn" onclick="deleteItem(${item.id})">Ã—</button>
																													</div>
                    `;
          } else {
            row.innerHTML = `
                        
																													<div>
																														<strong>${item.name}</strong>
																														<div style="font-size: 0.9rem; color: #666;">${item.materialName}</div>
																													</div>
																													<div>${item.sizeDisplay}</div>
																													<div>${item.quantity.toFixed(2)} ${item.unit}</div>
																													<div>RM ${item.unitPrice.toFixed(2)}</div>
																													<div>
																														<strong>RM ${item.subtotal.toFixed(2)}</strong>
																													</div>
																													<div>
																														<button class="delete-btn" onclick="deleteItem(${item.id})">Ã—</button>
																													</div>
                    `;
          }
          itemsList.appendChild(row);
        });
      }
      // åˆ é™¤é¡¹ç›®
      function deleteItem(id) {
        items = items.filter(item => item.id !== id);
        renderItems();
        updateTotals();
      }
      // æ›´æ–°æ€»è®¡
      function updateTotals() {
        const subtotal = items.reduce((sum, item) => sum + item.subtotal, 0);
        document.getElementById('totalItems').textContent = items.length;
        document.getElementById('subtotal').textContent = `RM ${subtotal.toFixed(2)}`;
        document.getElementById('grandTotal').textContent = `RM ${subtotal.toFixed(2)}`;
      }
      // æ‰“å°æŠ¥ä»·å•
      function printQuote() {
        if (items.length === 0) {
          alert('Please add items to the quotation first.');
          return;
        }
        const notes = document.getElementById('printingNotes').value.trim();
        const customerTypeNames = {
          'standard': 'Standard Customer',
          'regular': 'Regular Customer',
          'vip': 'VIP Customer'
        };
        const printContent = `
                
																													<html>
																														<head>
																															<title>Kee Hup Quotation</title>
																															<style>
                            body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
                            .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px; }
                            h1 { color: #2c3e50; margin: 0 0 10px 0; }
                            .info { display: flex; justify-content: space-between; margin-bottom: 20px; }
                            .notes { background: #fff3cd; padding: 15px; margin: 20px 0; border-radius: 5px; border: 1px solid #ffc107; }
                            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                            th { background: #2c3e50; color: white; padding: 12px; text-align: left; }
                            td { padding: 10px; border-bottom: 1px solid #ddd; }
                            .total { text-align: right; margin-top: 30px; font-size: 18px; }
                            .grand-total { font-size: 24px; font-weight: bold; color: #2c3e50; margin-top: 10px; }
                            .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; border-top: 1px solid #ddd; padding-top: 20px; }
                        </style>
																														</head>
																														<body>
																															<div class="header">
																																<h1>Kee Hup Quotation</h1>
																																<div>Date: ${new Date().toLocaleDateString('en-MY')}</div>
																																<div>Customer Type: ${customerTypeNames[currentCustomerType]}</div>
																															</div>
																															<div class="info">
																																<div>Quotation No: KH-${Date.now().toString().slice(-6)}</div>
																																<div>Prepared by: [Your Name]</div>
																															</div>
                        
                        ${notes ? `
                            
																															<div class="notes">
																																<strong>Notes:</strong>
																																<br>
                                ${notes.replace(/\n/g, '
																																	<br>')}
                            
																																	</div>
                        ` : ''}
                        
                        
																																	<table>
																																		<thead>
																																			<tr>
																																				<th>Description</th>
																																				<th>Size/Details</th>
																																				<th>Quantity</th>
																																				<th>Unit Price</th>
																																				<th>Subtotal</th>
																																			</tr>
																																		</thead>
																																		<tbody>
                                ${items.map(item => `
                                    
																																			<tr>
																																				<td>${item.name}
																																					<br>
																																						<small>${item.materialName}</small>
																																					</td>
																																					<td>${item.sizeDisplay}</td>
																																					<td>${item.quantity.toFixed(2)} ${item.unit}</td>
																																					<td>RM ${item.unitPrice.toFixed(2)}</td>
																																					<td>RM ${item.subtotal.toFixed(2)}</td>
																																				</tr>
                                `).join('')}
                            
																																			</tbody>
																																		</table>
																																		<div class="total">
																																			<div>Subtotal: RM ${items.reduce((s, i) => s + i.subtotal, 0).toFixed(2)}</div>
																																			<div class="grand-total">GRAND TOTAL: RM ${items.reduce((s, i) => s + i.subtotal, 0).toFixed(2)}</div>
																																		</div>
																																		<div class="footer">
																																			<p>Thank you for your business!</p>
																																			<p>Kee Hup Supplier Sdn. Bhd.</p>
																																			<p>C.O.D Terms | Valid for 30 days</p>
																																		</div>
																																	</body>
																																</html>
            `;
        const printWindow = window.open('', '_blank');
        printWindow.document.write(printContent);
        printWindow.document.close();
        printWindow.focus();
        setTimeout(() => {
          printWindow.print();
          printWindow.close();
        }, 500);
      }
      // é‡ç½®æŠ¥ä»·å•
      function resetQuote() {
        if (items.length === 0 || confirm('Start a new quotation? Current items will be cleared.')) {
          items = [];
          renderItems();
          updateTotals();
          document.getElementById('printingNotes').value = '';
        }
      }
      // ==================== åˆå§‹åŒ– ====================
      function init() {
        // åˆå§‹åŒ–ä»·æ ¼ç³»ç»Ÿ
        initPriceSystem();
        // äº‹ä»¶ç›‘å¬
        document.getElementById('width').addEventListener('input', calculateArea);
        document.getElementById('height').addEventListener('input', calculateArea);
        document.getElementById('addItemBtn').addEventListener('click', addItem);
        document.getElementById('printBtn').addEventListener('click', printQuote);
        document.getElementById('saveBtn').addEventListener('click', saveSettings);
        document.getElementById('resetBtn').addEventListener('click', resetQuote);
        // 3D LEDè®¡ç®—å™¨äº‹ä»¶
        document.getElementById('ledHeight').addEventListener('input', function() {
          update3DLedCalculator();
        });
        document.getElementById('ledQuantity').addEventListener('input', function() {
          update3DLedCalculator();
        });
        // è¿‘ä¼¼å€¼å¼€å…³äº‹ä»¶
        document.getElementById('roundingLed3d').addEventListener('change', function() {
          roundingConfig['led-3d'] = this.checked;
          saveRoundingConfig();
          update3DLedCalculator();
        });
        document.getElementById('roundingLed3dUv').addEventListener('change', function() {
          roundingConfig['led-3d-uv'] = this.checked;
          saveRoundingConfig();
          update3DLedCalculator();
        });
        document.getElementById('roundingLed3dSpecial').addEventListener('change', function() {
          roundingConfig['led-3d-special'] = this.checked;
          saveRoundingConfig();
          update3DLedCalculator();
        });
        // åŠ è½½è¿‘ä¼¼å€¼è®¾ç½®
        loadRoundingSettings();
        // åˆå§‹è®¡ç®—
        calculateArea();
        renderItems();
        updateTotals();
        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
          if (e.ctrlKey && e.key === 'Enter') {
            addItem();
          }
          if (e.key === 'Escape' && confirm('Clear all items?')) {
            resetQuote();
          }
        });
        console.log('âœ… Kee Hup Quotation System Ready!');
        console.log('Features: 3D LED calculator, custom materials, flexible pricing.');
      }
      // é¡µé¢åŠ è½½å®Œæˆæ—¶åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', init);
      // å¯¼å‡ºå‡½æ•°ä¾›æŒ‰é’®ä½¿ç”¨
      window.deleteItem = deleteItem;
    </script>
  </body>
</html>
